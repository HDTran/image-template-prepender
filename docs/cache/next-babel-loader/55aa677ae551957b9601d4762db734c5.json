{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport styles from '../styles/Home.module.css';\n\nconst cheerio = require('cheerio');\n\nconst INITIAL_HTML = '<div data-w-id=\"a1c3d1ea-0b0d-0060-0b74-fc4634ed5369\" class=\"image-wrapper\"><img src=\"images/IMG_8639_2.jpg\" sizes=\"(max-width: 767px) 93vw, (max-width: 991px) 600px, (max-width: 1439px) 94vw, 1236px\" srcset=\"images/IMG_8639_2-p-500.jpeg 500w, images/IMG_8639_2-p-800.jpeg 800w, images/IMG_8639_2-p-1080.jpeg 1080w, images/IMG_8639_2-p-1600.jpeg 1600w, images/IMG_8639_2.jpg 1671w\" alt=\"\" class=\"image-zoom\"></div>';\n\nconst Home = () => {\n  const {\n    0: text,\n    1: setText\n  } = useState(INITIAL_HTML);\n  const {\n    0: replaceText,\n    1: setReplaceText\n  } = useState('Webflow-Radio');\n  const {\n    0: replacedText,\n    1: setReplacedText\n  } = useState('');\n\n  const updateReplacedText = ({\n    haystack,\n    replace\n  } = {}) => {\n    const haystackText = haystack || text;\n    const replacingText = replace ? `${replace}/` : `${replaceText}/`;\n    const $ = cheerio.load(haystackText);\n    $('img').each(function () {\n      const src = $(this).attr('src');\n\n      if (src) {\n        $(this).attr('src', `<%=image_path('${src.replaceAll('images/', replacingText)}')%>`);\n      }\n\n      const srcset = $(this).attr('srcset');\n\n      if (srcset) {\n        const images = srcset.split(',');\n        const replaced = images.map(image => {\n          if (image.trim().indexOf('images/') === 0) {\n            return `<%=image_path('${image.trim().replace('images/', replacingText)}')%>`;\n          }\n\n          return image;\n        }).join(', ');\n        $(this).attr('srcset', replaced);\n      }\n    });\n    const finishedText = $('body').html().replaceAll('&lt;', '<').replaceAll('&gt;', '>').replaceAll('&apos;', \"'\");\n    setReplacedText(finishedText);\n  };\n\n  const handleInputHTML = e => {\n    const inputText = e.target.value;\n    setText(inputText);\n    updateReplacedText({\n      haystack: inputText\n    });\n  };\n\n  const handleReplaceChange = e => {\n    const inputText = e.target.value;\n    setReplaceText(inputText);\n    updateReplacedText({\n      replace: inputText\n    });\n  };\n\n  useEffect(() => {\n    updateReplacedText();\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"Image Template Prepender\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      })]\n    }), /*#__PURE__*/_jsxs(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: styles.title,\n        children: \"Image to Template Translator\"\n      }), /*#__PURE__*/_jsxs(\"p\", {\n        className: styles.description,\n        children: [\"Get started by pasting HTML into the input to get back a response with\", ' ', /*#__PURE__*/_jsx(\"span\", {\n          className: styles.code,\n          children: \"<%=image_path('{replace}/')%>\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          children: \"Input HTML\"\n        }), /*#__PURE__*/_jsx(\"textarea\", {\n          onChange: handleInputHTML,\n          placeholder: '<div data-w-id=\"a1c3d1ea-0b0d-0060-0b74-fc4634ed5369\" class=\"image-wrapper\"><img src=\"images/IMG_8639_2.jpg\" sizes=\"(max-width: 767px) 93vw, (max-width: 991px) 600px, (max-width: 1439px) 94vw, 1236px\" srcset=\"images/IMG_8639_2-p-500.jpeg 500w, images/IMG_8639_2-p-800.jpeg 800w, images/IMG_8639_2-p-1080.jpeg 1080w, images/IMG_8639_2-p-1600.jpeg 1600w, images/IMG_8639_2.jpg 1671w\" alt=\"\" class=\"image-zoom\"></div>',\n          value: text,\n          style: {\n            height: 300,\n            width: 500\n          }\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsxs(\"p\", {\n          children: [\"Replace\", ' ', /*#__PURE__*/_jsx(\"span\", {\n            className: styles.code,\n            children: \"images/\"\n          }), ' ', \"with\"]\n        }), /*#__PURE__*/_jsx(\"input\", {\n          onChange: handleReplaceChange,\n          placeholder: \"Webflow-Radio/\",\n          value: replaceText,\n          style: {\n            width: 500\n          }\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.code__area,\n        children: /*#__PURE__*/_jsx(\"textarea\", {\n          className: styles.code,\n          value: replacedText,\n          readOnly: true,\n          style: {\n            height: 300,\n            width: 500\n          }\n        })\n      })]\n    })]\n  });\n};\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}